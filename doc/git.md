# Работа с Pull Request

Сам процесс создания и наименования новых веток, PR, правила оформления описания изменения и прочего описан в документе [Процесс разработки проектов Wiren Board с использованием Git](https://github.com/wirenboard/codestyle/blob/master/workflow.md). Важно соблюдать правила, чтобы ваш PR приняли.

Здесь описаны консольные команды git, но их без труда можно по названиям переложить на интерфейс Github или VSCode.

## Для авторов изменений

Если вы впервые вносите правки, клонируйте репозиторий:

```bash
git clone https://github.com/wirenboard/website.git
```

В остальных случаях просто получите изменения с сервера и переключитесь обратно на main:

```bash
git fetch -ap
git checkout main
git pull
```

Далее:

1. Создайте и переключитесь на новую ветку:
   ```bash
   git checkout -b feature/имя-ветки
   ```
2. Внесите изменения и сохраните файлы.
3. Сделайте коммит правок:
   ```bash
   git add .
   git commit -m "Краткое описание изменений"
   ```
   `git add .` добавляет все сделанные изменения, вместо него можно использовать `git add -p` — это позволит посмотреть все внесённые изменения и принять или отклонить часть из них.
4. Отправьте ветку в удалённый репозиторий:
   ```bash
   git push -u origin feature/имя-ветки
   ```
5. На GitHub перейдите в **Pull requests** → **New pull request**, заполните заголовок и описание, назначьте ревьювера marketing, создайте PR.

Если надо внести изменения в созданный PR:

1. Переключитесь на вашу ветку в Pull requests:
   ```bash
   git checkout feature/имя-ветки
   ```
2. Внесите изменения и сохраните файлы.
3. Сделайте коммит правок:
   ```bash
   git add .
   git commit -m "Краткое описание изменений"
   ```
4. Отправьте изменения в ветке в удалённый репозиторий:
   ```bash
   git push
   ```

Если PR приняли:

1. Влейте изменения через **Squash and merge**, сделайте описание изменений понятным и компактным.
2. Получите изменения с сервера, переключитесь на main и удалите ветку с которой вы работали:
   ```bash
   git fetch -ap
   git checkout main
   git branch -d feature/имя-ветки
   ```

Посмотреть список локальных веток `git branch`, локальных и удалённых — `git branch -a`.

## Для ревьюверов

Если вы впервые проверяете правки, клонируйте репозиторий:

```bash
git clone https://github.com/wirenboard/website.git
```

В остальных случаях просто получите изменения с сервера:

```bash
git fetch -ap
```

Далее:

1. Перейдите в раздел **Pull requests** на GitHub, найдите нужный PR.
2. Загрузите и переключитесь на ветку PR:
   ```bash
   git fetch origin pull/<номер>/head:pr-<номер>
   git checkout pr-<номер>
   ```
3. Запустите локальный сервер (см. раздел Локальный запуск копии сайта) и проверьте изменения.
4. После проверки вернитесь на `main`:
   ```bash
   git checkout main
   git pull
   ```

Если в PR автор внёс изменения и надо проверить, то находясь в нужной ветке просто сделайте `git pull` — это подтянет все изменения автора в вашу локальную копию ветки.