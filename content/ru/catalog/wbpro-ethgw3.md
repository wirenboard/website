---
article: WBPRO-ETHGW3
cover: wbpro-ethgw3/wbpro-ethgw3-full-face.png
catalogCover: wbpro-ethgw3/wbpro-ethgw3-side1.png
meta: Преобразователь интерфейсов RS-485, Ethernet, Wi-Fi, WBIO
keywords: Modbus TCP, RS-485, Ethernet, Wi-Fi, WBIO
images: [
  ["wbpro-ethgw3/wbpro-ethgw3-side1.png"],
  ["wbpro-ethgw3/wbpro-ethgw3-side2.png"]
]
use_cases: []
---
::product
#description

Шлюз WBPRO-ETHGW3 предназначен для удалённого подключения устройств с интерфейсом RS-485 и WBIO (модули ввода-вывода) по Ethernet и Wi-Fi.

Имеет два независимых канала RS-485—TCP, каждый может работать в одном из режимов:
1. **Modbus TCP** — для работы с RS485 Modbus RTU устройствами.
2. **Прозрачный** — для работы с любыми протоколами последовательной шины RS-485: Modbus RTU, DOOYA, AKKO и так далее.

Модули WBIO подключаются в боковой разъём и представлены как Modbus-устройство на шине RS485-2 с собственным адресом, указанном на наклейке. Поддержку модулей WBIO можно отключить в веб-интерфейсе и освободить порт для любых протоколов.

#info
::product-section{title="Ethernet и Wi-Fi"}


Два сетевых интерфейса:
1. **Wi-Fi** — по умолчанию активен и на нём поднята точка доступа с паролем. Доступны режимы: «точка доступа», «клиент» и «отключено».
2. **Ethernet**  — настроен на получение IP-адреса по DHCP.

Если устройство с которого вы подключаетесь к шлюзу поддерживает mDNS, то модуль будет доступен по адресу **wbpro-ethgw3-XXXXXX.local** на любом сетевом интерфейсе.

Имя хоста, режим Wi-Fi, а также сетевые настройки можно менять. Значения по умолчанию смотрите в документации.

::
::product-section{title="2 x RS-485"}


Два независимых порта RS-485, представленных каналами с режимами:
- **Modbus TCP** — пакеты Modbus RTU преобразуются в пакеты Modbus TCP и отдаются через сетевые интерфейсы.
- **Прозрачный** — пакеты отдаются через сетевые интерфейсы «как есть» без преобразования. В этом режиме можно подключать как обычные Modbus RTU устройства (Modbus RTU Over TCP), так и устройства с произвольным протоколом поверх шины RS-485.

Для каждого порта RS-485 можно указать свой TCP-порт, режим и опрашивать потом его по одному из сетевых интерфейсов.

::

::product-section{title="Терминаторы и failsafe bias на портах RS-485"}
:photo{
  src="wbpro-ethgw3/1_WB-ethgw3_Terminator_RU.png"
  width="500px"
  float="right"
}

На каждом порту RS-485 есть программно отключаемые:
- **терминатор** — 120 Ом, подключенный между линиями A и B. Если модуль стоит в конце шины — нужно включить, если в середине — выключить;
- **failsafe bias** — резисторы по 560 Ом, которые растягивают шину, устраняя неопределённость при выключенных передатчиках устройств. Если модуль работает мастером — надо включить, в остальных случаях выключить.

Это упрощает схему подключения и даёт гибкость при проектировании и вводе в эксплуатацию.

::

::product-section{title="I/O Bus (WBIO)"}



**I/O Bus** — это интерфейс для подключения боковых модулей WBIO, предназначенных для контроллера Wiren Board.

Внутри шлюза интерфейс I/O Bus представлен Modbus-устройством на порту RS485-2, которое имеет адрес напечатанный на наклейке. Это позволяет опрашивать модули **WBIO** через RS-485 по протоколу Modbus RTU или через сетевые интерфейсы по протоколу **ModbusTCP/Modbus RTU Over TCP**.

Если поддержка WBIO не нужна и вы хотите использовать порт RS485-2 для других протоколов, можете отключить интерфейс I/O Bus в настройках.
::

::product-section{title="Питание модуля и подключенных устройств"}



В базовой комплектации модуль питается от напряжений 9…28 В постоянного тока и модуль PoE с поддержкой стандартов:
- **802.3af, 802.3at** — активное PoE с напряжением до 48 В;
- **Passive Poe** — передача напряжения до 24 В по четырём парам.

Питание модуля через специальные клеммы подаётся на подключённые к портам RS-485 устройства. Есть защита по току 2.5 A на оба порта, а также программное отключение и сохранение состояния при перезагрузке. При работе от PoE на выход подаётся 24 В постоянного тока, а ток на ограничен 400 мА.

Всё это позволяет создавать компактные инсталляции без лишних проходных клемм, а при питании от PoE и без блока питания.

::

::product-section{title="Индикация"}


На передней панели модуля установлены индикаторы:
- индикатор статуса модуля;
- активность Ethernet и Wi-Fi;
- состояние выхода Vout для питания подключённых устройств;
- обмен на портах RS-485.

Они позволяют оценить состояние модуля без подключения к веб-интерфейсу.

::

::product-section{title="Веб-интерфейс для настройки"}



Современный веб-интерфейс хорошо адаптируется под любой размер экрана и позволяет настраивать параметры сетевых интерфейсов, портов, выбора режима и пр. Есть ограничение доступа по логину и паролю.

Если WBPRO-ETHGW3 подключён к одному из сетевых интерфейсов контроллера, а контроллер в Wiren Board Cloud — можно настроить проксирование веб-интерфейса модуля и получить доступ к нему через облако. Подробности в документации.

::

::product-section{title="Поддержка Быстрого Modbus"}

Все устройства Wiren Board в дополнение к стандартному Modbus RTU могут работать с его расширением [Быстрый Modbus](https://wirenboard.com/wiki/Fast_Modbus) ⚡, которое добавляет новые возможности: 
- мгновенный опрос состояний входов и измеренных значений через события;
- быстрый поиск подключённых к контроллеру устройств;
- разрешение коллизий адресов на шине.

WBPRO-ETHGW3 поддерживает Быстрый Modbus во всех режимах работы: прозрачный шлюз и Modbus TCP.

::

::product-section{title="Сброс настроек и режим Factory"}



Если вы забыли настройки модуля — их всегда можно сбросить на заводские с помощью кнопки Config. Это же можно сделать из веб-интерфейса.

Для сложных случаев, когда прошивка по каким-то причинам не загружается, доступен режим Factory в котором вы гарантированно сможете залить последнюю стабильную версию прошивки.

::

::product-section{title="Обновление прошивки"}


Иногда мы можем выпускать новые прошивки для устройства, чтобы исправить обнаруженные проблемы или добавить новые функции.

Пользователи могут залить новую версию прямо через веб-интерфейс без программатора.

::

::product-section{title="DIY — экспериментируйте с прошивками"}


**WBPRO-ETHGW3** построен на микроконтроллере **ESP32** и с завода прошит нашей собственной прошивкой, реализующей функции шлюза.

Однако, вы можете использовать железо модуля в своих прошивках и превратить шлюз в компактный сервер умного дома с нужными вам функциями. Для удобства мы установили **разъём USB-C**, поэтому для прошивки своего ПО в устройство вам потребуется только компьютер и кабель *USB-C*.

В документации есть полное описание GPIO и примеры для популярной платформы **ESPHome**. Конечно, вы можете использовать любой удобный инструмент и язык: **Си, Micro Python, Lua** и т.п.

Что бы вы не делали, вы всегда можете вернуть нашу заводскую прошивку с функциями шлюза и использовать устройство по прямому назначению. Гарантия при этом сохраняется.
::

:include{
  path="/catalog/includes/quality_control"
}

::
