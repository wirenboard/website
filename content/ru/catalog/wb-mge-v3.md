---
article: WB-MGE v.3
name: WB-MGE v.3
title: Преобразователь интерфейсов
type: Мульти-протокольный шлюз
sub_title: Преобразователь интерфейсов RS-485, Ethernet, Wi-Fi, WBIO
cover: wb-mge-v3/wb-mge-v3-main.png
documentation: https://wirenboard.com/wiki/WB-MGE_v.3_Modbus_Ethernet_Gateway
meta: Преобразователь интерфейсов RS-485, Ethernet, Wi-Fi, WBIO
keywords: Modbus TCP, RS-485, Ethernet, Wi-Fi, WBIO
images: [
  ["wb-mge-v3/wb-mge-v3-main.png"],
  ["wb-mge-v3/wb-mge-v3-top.png"],
  ["wb-mge-v3/wb-mge-v3-pcb-1.png"],
  ["wb-mge-v3/wb-mge-v3-pcb-2.png"]
]
video: [
  ["https://peertube.wirenboard.com/w/dWoKUA1staBV8X6sPmRwfo"],
  ["https://peertube.wirenboard.com/w/dbi1EHu4SC5WYmhCcjaidm"]
]
use_cases: []
---
::product
#description
Шлюз WB-MGE v.3 предназначен для удалённого подключения устройств с интерфейсом RS-485 и WBIO (модули ввода-вывода) по Ethernet и Wi-Fi.

Имеет два независимых канала RS-485—TCP, каждый может работать в одном из режимов:
1. Modbus TCP — для работы с RS485 Modbus RTU устройствами.
2. Прозрачный — для работы с любыми протоколами последовательной шины RS-485: Modbus RTU, DOOYA, AKKO и так далее.

Модули WBIO подключатся в боковой разъём и представлены как Modbus-устройство на шине RS485-2 с собственным адресом, указанном на наклейке. Поддержку модулей WBIO можно отключить в веб-интерфейсе и освободить порт для любых протоколов.

#info
## Основные характеристики
::product-section{title="Ethernet и Wi-Fi"}
:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  width="500px"
  float="right"
}

В WB-MGE v.3 есть два сетевых интерфейса:
1. Wi-Fi — по умолчанию активен и на нём поднята точка доступа с паролем. Доступны режимы: «точка доступа», «клиент» и «отключено».
2. Ethernet  — настроен на получение IP-адреса по DHCP.

Настройки всех интерфейсов можно менять.

::

::product-section{title="RS-485"}
:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  width="500px"
  float="right"
}

В модуле два независимых порта RS-485 с режимами:
- Modbus TCP — пакеты Modbus RTU преобразуются в пакеты Modbus TCP и отдаются через сетевые интерфейсы.
- Прозрачный — пакеты отдаются через сетевые интерфейсы «как есть» без преобразования. В этом режиме можно подключать как обычные Modbus RTU устройства (Modbus RTU Over TCP), так и устройства с произвольным протоколом поверх шины RS-485.

Для каждого порта RS-485 можно указать свой TCP-порт, режим и опрашивать потом его по одному из сетевых интерфейсов.

::

::product-section{title="Терминаторы и failsafe bias на портах RS-485"}
:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  width="500px"
  float="right"
}

В модуле на каждом порту RS-485 есть программно отключаемые:
- терминатор — 120 Ом, подключенный между линиями A и B. Если модуль стоит в конце шины — нужно включить, если в середине — выключить.
- failsafe bias — резисторы по 560 Ом, которые растягивают шину, устраняя неопределённость при выключенных передатчиках устройств. Если модуль работает мастером — надо включить, в остальных случаях выключить.

Это упрощает схему подключения и даёт гибкость при проектировании и вводе в эксплуатацию.

::

::product-section{title="I/O Bus (WBIO)"}

:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  float="right"
  width="500px"
}

I/O Bus — это интерфейс для подключения боковых модулей WBIO, предназначенных для контроллера Wiren Board.

Внутри шлюза интерфейс I/O Bus представлен Modbus-устройством на порту RS485-2, которое имеет адрес напечатанный на наклейке. Это позволяет опрашивать модули WBIO через RS-485 по протоколу Modbus RTU или через сетевые интерфейсы по протоколу ModbusTCP/Modbus RTU Over TCP.

Если поддержка WBIO не нужна и вы хотите использовать порт RS485-2 для других протоколов, можете отключить интерфейс I/O Bus в настройках.
::

::product-section{title="Питание устройств"}
:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  width="500px"
  float="right"
}

На каждом порту RS-485 доступна клемма питания Vout, куда подаётся входное напряжение питания модуля или 24 В постоянного тока при питании от PoE.

Есть защита по току 2.5 A на оба канала, а также программное отключение и сохранение состояния при перезагрузке.

::

::product-section{title="PoE 802.3af, 802.3at"}

:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  float="right"
  width="500px"
}

Для удобства создания небольших инсталляций в WB-MGE v.3 можно установить модуль PoE с поддержкой стандартов:
- 802.3af, 802.3at — активное PoE с напряжением до 48 В;
- Passive Poe — передача напряжения до 24 В по четырём парам.

Модуль PoE выдаёт на выходе всегда 24 В, которое можно использовать для питания самого шлюза и подключённых к нему устройств. Ограничение по току для питания внешних устройств при работе от PoE — 400 mA.

::

::product-section{title="Веб-интерфейс для настройки"}

:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  float="right"
  width="500px"
}

В модуле есть современный веб-интерфейс для настройки сетевых интерфейсов, портов, выбора режима и пр. Он защищён паролем и имеет адаптивный дизайн для работы устройствах с любым разрешением.

Если WB-MGE v.3 подключён к одному из сетевых интерфейсов контроллера, а контроллер в Wiren Board Cloud — можно настроить проксирование веб-интерфейса модуля и получить доступ к нему через облако. Подробности в документации.

::

::product-section{title="Поддержка Быстрого Modbus"}

:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  float="right"
  width="500px"
}

Все устройства Wiren Board в дополнение к стандартному Modbus RTU могут работать с его расширением [Быстрый Modbus](https://wirenboard.com/wiki/Fast_Modbus) ⚡, которое добавляет новые возможности: 
- мгновенный опрос состояний входов и измеренных значений через события;
- быстрый поиск подключённых к контроллеру устройств;
- разрешение коллизий адресов на шине.

WB-MGE v.3 поддерживает Быстрый Modbus во всех режимах работы: прозрачный шлюз и Modbus TCP.

::

::product-section{title="DIY — создание собственных прошивок"}

:photo{
  src="wb-mge-v3/wb-mge-v3-char-1.png"
  float="right"
  width="500px"
}

WB-MGE v.3 построен на микроконтроллере ESP32 и с завода прошит нашей  собственной прошивкой, реализующей функции шлюза.

Однако, вы можете использовать железо модуля в своих прошивках и превратить шлюз в компактный сервер умного дома с нужными вам функциями. Для удобства мы установили разъём USB-C, поэтому для прошивки своего ПО в устройство вам потребуется только компьютер и кабель USB-C.

В документации есть полное описание GPIO и примеры для популярной платформы ESPHome.

::

:include{
  path="/catalog/includes/quality_control"
}

::