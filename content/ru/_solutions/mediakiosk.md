---
title: 'Умные медиакиоски для остановок'
cover: /img/solutions/mediakiosk.webp
date: 2024-11-26
category: commercial_estate_monitoring
---

_«Контроллеры Wiren Board обеспечили надежность и гибкость, необходимые для круглосуточной работы наших медиакиосков в сложных условиях.», **Олег Енов, руководитель инженерной мастерской W.E.N.D.**_

## О компании

:photo{
    src="/img/solutions/mediakiosk/1.jpg"
    caption="Коллаж на тему медиакиосков в Калининграде"
    width="400"
    float="right"
}

[Инженерная мастерская W.E.N.D.](https://t.me/vv_e_n_d) — это команда специалистов из Калининграда, которая занимается проектированием систем освещения и автоматизацией зданий. Их опыт включает разработку высокотехнологичных решений для городской инфраструктуры, таких как умные медиакиоски. Инженеры W.E.N.D. применяют современные технологии для создания надежных и удобных устройств, способных работать в сложных условиях. Их проекты сочетают инженерную точность, инновации и внимание к деталям.

Олег познакомился с Wiren Board в 2019 году. Потребовалась замена модулей ввода-вывода Modbus от ICPDAS на объектах домашней автоматизации — решили использовать [модули реле WB-MR6](https://wirenboard.com/ru/catalog/wb-mr-relay-modules/), которые отлично справились с задачей. На некоторых объектах пришлось заменить ШИМ-диммеры, работающие по DMX — и здесь тоже подошли [модули WB-MRGBW-D](https://wirenboard.com/ru/product/WB-MRGBW-D/), которые работают через Modbus. Причем получилось использовать существующую кабельную инфраструктуру от DMX. А после выхода более мощных контроллеров [Wiren Board 7](https://wirenboard.com/ru/catalog/kontrollery/) стали использовать их во всех проектах.

## Задачи и проблемы

В 2018 году, в преддверии Чемпионата мира по футболу, в Калининграде реконструировали часть остановочных павильонов. К ним подвели электропитание и установили рекламные лайтбоксы. После завершения чемпионата администрация города решила модернизировать эти рекламные конструкции, добавив общественно полезную информацию. В конкурсе победила [одна из калининградских компаний](https://t.me/vv_e_n_d), и мы расскажем о ее разработке.

:gallery{
    :data='[
        ["/img/solutions/mediakiosk/2.jpeg", "Первая версия медиакиоска на остановке"],
        ["/img/solutions/mediakiosk/3.jpeg", "Вторая версия медиакиоска на остановке. В данный момент на экране реклама и время прибытия ближайшего транспорта"],
        ["/img/solutions/mediakiosk/4.jpeg", "С первого взгляда можно узнать, когда прибудет нужный автобус"],
        ["/img/solutions/mediakiosk/5.jpeg", "Медиакиоск также выводит информацию о предстоящих мероприятиях в Калининграде"]
    ]'
}

## Решение

Информационный киоск — это большой монитор за антивандальным стеклом в прочном металлическом корпусе. Корпус сделали из конструкционной стали толщиной 2–3 мм, защитив его от внешних условий электродиффузионным цинкованием и порошковой покраской, а основание — из стального листа 5 мм для дополнительной прочности. Корпуса производит местный завод — есть разные варианты окраски.

Антивандальное профилированное стекло-триплекс толщиной 16 мм оснастили пленкой для сенсорного ввода. Стекло местного производства, оно может быть атермальным (термозащитным), антибликовым или сочетать обе эти характеристики. Такое решение обеспечивает высокую степень защиты от внешних воздействий.

Внутри киоска специалисты [Инженерной мастерской W.E.N.D.](https://t.me/vv_e_n_d) установили мини-ПК на базе архитектуры x86, который отвечает за вывод видео на монитор. Решили использовать стандартные компоненты в компактном корпусе. В качестве операционной системы выбрали собственную сборку Linux, чтобы не было ничего лишнего. Конечно, ее сложнее обслуживать, чем популярные дистрибутивы, но с этим легко справляются программисты, которые есть в штате компании. 

Программисты разработали комплекс программного обеспечения и баз данных для контроля работы и управления контентом, включая:

* собственную сборку Linux и репозиторий для развертывания и обновления ПО на компьютерах;  
* плеер на базе Electron;  
* личный кабинет для рекламодателей;  
* панель администратора для управления и анализа сети медиакиосков;  
* систему мониторинга.

С помощью ПО можно генерировать и показывать контент, сформированный в личных кабинетах рекламодателей, синхронизировать медиафайлы между локальным и облачным хранилищами и при этом не зависеть от качества связи. Большая часть сбоев разрешается автоматически на основе данных мониторинга и с помощью сценариев для устранения вероятных ошибок — участие оператора в работе всей сети медиакиосков минимальное.

:gallery{
    :data='[
        ["/img/solutions/mediakiosk/6.jpeg", "С внутренней стороны остановки тоже установили монитор. Внутри систему фактически продублировали"],
        ["/img/solutions/mediakiosk/7.jpeg", "Строение первой версии медиакиоска"],
        ["/img/solutions/mediakiosk/8.jpeg", "Так к медиакиоску подвели питание"],
        ["/img/solutions/mediakiosk/9.jpeg", "Компьютер x86 внутри медиакиоска установили в свой металлический корпус"]
    ]'
}

### Зачем нужны медиакиоски

Мы вкратце рассказали, из чего состоит медиакиоск и какой софт нужен для их работы, но чем они полезны для горожан и гостей Калининграда? У медиакиосков есть ряд полезных функций:

1. Информация о транспорте. В верхней части монитора отображается бегущая строка с номерами маршрутов и оставшимся временем до прибытия автобусов. Данные поступают от оператора через API. Жители города оценили удобство этой функции и при временном демонтаже киоска для ремонта сразу же запросили его возвращение. К счастью, медиакиоск быстро отремонтировали и вернули на место.  
2. Новости и события. Система выводит калининградские новости с портала [RUGRAD](https://rugrad.online/) и информацию о текущих мероприятиях в городе.  
3. Реклама. Она обеспечивает окупаемость проекта. Для рекламодателей создали личный кабинет для управления кампаниями.   
4. Туристическая навигация. Благодаря сенсорной панели туристы могут просматривать пешеходные маршруты, информацию о флоре и фауне, исторические данные и т.д.

Кроме того, мини-ПК распознает изображение с камеры киоска. В каждый киоск установили камеру [Hikvision](https://www.hikvision.com/). Зачем это нужно? Как нам пояснили, сейчас разрабатывают таргетинг рекламы. Система будет знать, сколько человек находится на остановке и какого они примерно возраста и пола. Если автобус ждут пенсионеры, можно показать рекламу, которая будет им интересна. Если люди среднего возраста едут на работу или возвращаются домой — другую рекламу. Если же остановка пустая, можно снизить яркость экрана для экономии энергии и уменьшения температуры.

Камеры подключили к системе «Безопасный город», они передают потоковое видео на серверы в режиме 24/7. У камеры есть локальный кэш, в который она записывает определённый объём данных на случай сбоя подключения к интернету. Если система обнаруживает инциденты, она оповещает правоохранительные органы, повышая безопасность на остановках.

С помощью такого аппаратно-программного комплекса можно просматривать медиаконтент в высоком качестве, находясь рядом с медиакиоском, в любую погоду и в любое время суток.

:gallery{
    :data='[
        ["/img/solutions/mediakiosk/10.jpeg", "А вот и сам компьютер x86"],
        ["/img/solutions/mediakiosk/11.png", "Панель управления CityTV"],
        ["/img/solutions/mediakiosk/12.png", "Создание новой рекламы"],
        ["/img/solutions/mediakiosk/13.png", "Аналитика показов рекламы"]
    ]'
}

### Промышленные мониторы и охлаждение

Мониторы тоже не совсем обычные. В киосках используют промышленные мониторы с разрешением 4K и IPS-матрицей с терморезистивными свойствами. В отличие от обычных LED-панелей с крупными пикселями, выбор IPS 4K обеспечивает четкую и детализированную картинку — важное преимущество для отображения качественного контента.

Поскольку киоски находятся на улице, им требуется очень высокая яркость — монитор обеспечивает до 2500 кд/м². Ночью такая яркость не нужна, поэтому после заката контроллер включает темную тему и уменьшает яркость, а на рассвете — наоборот. В киоск встроили датчик освещенности, с помощью которого  яркость меняется в зависимости от количества света на улице. К этому мы еще вернемся. Но как регулируют яркость? Инженеры отказались от симуляции ИК-пульта, поскольку это решение не самое надёжное. Поэтому решили использовать специальный вход на мониторе и регулировать яркость при помощи ШИМ. За это отвечает модуль аналоговых выходов [WB-MAO4](https://wirenboard.com/ru/product/WB-MAO4/).

Обратная сторона высокой яркости — тепловыделение. Подсветка панели потребляет до 400 Вт мощности. В новой версии киосков инженеры не только установили панели с более широким температурным диапазоном, но и усилили вентиляцию. Они разместили снизу четыре вентилятора на 24 В, которые нагнетают воздух внутрь основного сегмента из нижней камеры. Перед вентиляторами добавили пылевой фильтр. В верхней части установили еще четыре вентилятора, которые вытягивают воздух из основного сегмента, — каждый из них потребляет до 14,5 Вт мощности, то есть в сумме получается 120 Вт. Вентиляторы подключают стандартными 4-контактными штекерами к плате ШИМ-распределителя, которую разработали и изготовили самостоятельно. Таким образом, для управления каждой четверкой вентиляторов используют только один сигнал ШИМ, который обеспечивает модуль [WB-MAO4](https://wirenboard.com/ru/product/WB-MAO4/). Вентиляторы обеспечивают хорошее охлаждение, и за весь летний сезон ни разу не возникло случаев перегрева.

:gallery{
    :data='[
        ["/img/solutions/mediakiosk/14.jpeg", "Камеру Hikvision подключили к системе «Безопасный город»"],
        ["/img/solutions/mediakiosk/15.jpeg", "В цехе по сборке медиакиосков как раз закончили собирать антивандальное профилированное стекло-триплекс толщиной 16 мм"],
        ["/img/solutions/mediakiosk/16.jpeg", "Четыре верхних вентилятора"],
        ["/img/solutions/mediakiosk/17.jpeg", "Четыре нижних вентилятора"]
    ]'
}

### Контроллер и датчики

Чтобы гарантировать бесперебойную работу киосков в режиме 24/7, инженеры установили дополнительный контроллер для диспетчеризации. В первой версии киосков решили использовать оборудование для автоматизации от местного производителя. Но первый год эксплуатации дал неутешительную картину: контроллеры оказались ненадежными. Приходилось постоянно решать различные проблемы: например компоненты внутри киоска нагревались до 60–70 °C — это приводило к выходу из строя как контроллеров, так и роутера Mikrotik.

Поэтому выбрали [контроллер Wiren Board](https://wirenboard.com/ru/catalog/kontrollery/). Подкупил и заявленный температурный диапазон от \-40 до \+75 °C. Как показала практика, контроллер успешно выдерживал температуру до 70 °C. Если температура превышает порог 70 °C, вентиляторы работают на полную мощность. Если охладить систему всё равно не получается, приходится выключать монитор.

В новой версии киоска заменили роутер Mikrotik [модулем WBC-4G v.2](https://wirenboard.com/ru/product/wbc-4g-v2/) с 4G-модемом — его установили непосредственно в корпус контроллера. Такое решение помогло уменьшить число узлов в системе и потенциальных источников сбоев. Модем отвечает за подключение к интернету; через него работает система мониторинга и администрирования. Кроме того, контроллер выступает в роли маршрутизатора для компьютера и камеры, которая транслирует изображение в АПК «Безопасный город».

В киоск установили два датчика [1Wire DS18B20](https://wirenboard.com/ru/product/1wire-DS18B20/) для контроля температуры. Первый — над монитором; по нему регулируют работу системы охлаждения. Второй — перед встроенным ИК-обогревателем для холодного старта в нижней части основного сегмента. Этот датчик дополняет модуль [WB-MS v.2](https://wirenboard.com/ru/product/WB-MS/) на DIN-рейке для контроля температуры и влажности. Поскольку киоски могут устанавливать в холодных регионах России, зимой возможен холодный старт с минусовыми температурами. Поэтому контроллер Wiren Board сначала включает ИК-обогреватель через модуль реле [WB-MR6CU](https://wirenboard.com/ru/product/WB-MR6CU/), нагревает основной сегмент киоска и просушивает его. Когда условия становятся подходящими, контроллер включает компьютер, камеру и мониторы. Этот модуль реле также управляет усилителем аудио и двумя блоками питания вентиляторов.

Нас заинтересовал датчик освещенности собственной разработки. Он состоит из аналогового датчика освещенности, который инженеры подключили к аналоговому входу контроллера Wiren Board. Они также встроили в него два температурных сенсора 1Wire.

В нижнем сегменте киоска, откуда вентиляторы забирают воздух для охлаждения основного сегмента, установили два динамика, аккумуляторы и электроавтоматы. Хотя динамики в текущей версии киоска не используют, возможность воспроизводить аудио есть. Для динамиков разработали свой модуль с усилителем в корпусе на DIN-рейку. Также установили реле ограничения пусковых токов собственной разработки с детекцией состояния через вход контроллера Wiren Board. Если город не подает электричество, Wiren Board узнает об этом и вышлет соответствующее оповещение.

Для управления частью нагрузок добавили модуль реле [WB-MRWM2](https://wirenboard.com/ru/product/wb-mrwm2/) с измерением потребляемой мощности. С помощью него можно узнать потребление монитора и вентиляторов, то есть косвенно определить их состояние, например понять, работает ли монитор и вращаются ли вентиляторы. В одном из киосков монитор «глючил»: отключал подсветку примерно раз в неделю. Теперь такое состояние легко определить: питание есть, но потребляемая мощность низкая. Написали скрипт, который перезагружает монитор по питанию, и временно решили проблему до полноценного ремонта.

Разработчики используют Node-RED для программирования и написали в нем всю логику работы контроллера и модулей. Но в будущем планируют перейти на скрипты wb-rules.

:gallery{
    :data='[
        ["/img/solutions/mediakiosk/18.jpeg", "Один из двух блоков подсветки панели"],
        ["/img/solutions/mediakiosk/19.jpeg", "Датчик освещения собственной разработки"],
        ["/img/solutions/mediakiosk/20.jpeg", "При холодном старте ИК-обогреватель нагревает основной сегмент киоска и просушивает его"],
        ["/img/solutions/mediakiosk/21.jpeg", "Система автоматизации и компьютер занимают сравнительно немного места в медиакиоске"]
    ]'
}

## Преимущества

:photo{
    src="/img/solutions/mediakiosk/22.jpeg"
    caption="Контроллер автоматизации Wiren Board внутри медиакиоска"
    width="400"
    float="right"
}

В сборочном цехе работа кипит: к концу 2024 года планируют ввести в эксплуатацию 50 новых киосков на остановках. Кроме того, конструкцию намеренно сделали модульной: стандартный киоск односторонний, но его можно легко превратить в двухсторонний, добавив монитор с другой стороны, компьютер x86 и контроллер Wiren Board с модулями. 

Сейчас также рассматривают проекты установки подобных киосков в заповедниках. В этих условиях сенсорные функции панели будут особенно востребованы для интерактивного взаимодействия посетителей с информацией о маршрутах, флоре, фауне и исторических особенностях местности.

В ассортименте компании Wiren Board есть устройства для решения как простых, так и сложных задач автоматизации и диспетчеризации: программируемые логические контроллеры, датчики климата, счетчики электроэнергии, сетевые карты для холодильников, мощные релейные модули и т.д. Все это позволяет подстроиться под любые требования заказчика и использовать оборудование Wiren Board в его экосистеме. При этом обеспечивается возможность расширения экосистемы в будущем.

Компания Wiren Board даёт на всё оборудование двухлетнюю гарантию с заменой оборудования без предварительной отправки в сервисный центр, а инженеры технической поддержки готовы помочь в решении как типовых, так и нестандартных задач.

## Дополнительные материалы

- [Сделано на Wiren Board: умный медиакиоск для остановок](https://habr.com/ru/companies/wirenboard/articles/848940/)

Прочее

- [Примеры других внедрений](../solutions/)
- [Статьи о подборе оборудования и рассказы пользователей](../articles)
