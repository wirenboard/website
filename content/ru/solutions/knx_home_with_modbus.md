---
title: 'Добавление диспетчеризации на Modbus к умному дому на KNX'
cover: knx_home_with_modbus/knx_home_with_modbus_logo.webp
date: 2024-10-26
category: apartments_automation
---

_«Мне понравилось, как контроллер Wiren Board работает с экосистемой KNX и хорошо ее дополняет», **Владимир Стародубов, основатель компании ON-IP**_

## О компании

:photo{
    src="knx_home_with_modbus/logo.jpg"
    caption="Коллаж на тему умного дома с KNX и Modbus"
    width="400"
    float="right"
}

Компания [«ON-IP»](https://on-ip.ru/) проектирует и интегрирует автоматизированные системы управления и электронные системы безопасности с 2008 года. Сочетание этих двух компетенций позволяет решать широкий спектр инженерных задач автоматизации объектов любого назначения.
На контроллерах и оборудовании [Wiren Board](https://wirenboard.com/) компания создает комплексные системы автоматизации, управления, системы мониторинга за оборудованием различного хозяйственного назначения и энергообеспечения.
Впервые с Wiren Board Владимир познакомился во время работы над проектом по удаленному управлению освещением по оптическим каналам связи на территории базы отдыха. Очень понравилось, как все устроено и работает. После этого оборудование Wiren Board используют почти во всех инсталляциях либо как основной, либо как вспомогательный контроллер управления и мониторинга.

## Задачи и проблемы

Сегодня многие умные дома строят на децентрализованном протоколе KNX, которому не нужен контроллер. Интеграторы к нему привыкли, устройств на рынке много, хотя цена многих отпугивает. Сергей, владелец коттеджа в Подмосковье, выбрал такое решение. Он заказал проект, интегратор проложил проводку и шину KNX, все настроил. К проекту добавили модуль [iRidium](https://www.iridi.com/) для красивого интерфейса.
Но аппетит приходит во время еды. После нескольких месяцев использования умного дома появились проблемы, о которых на этапе проектирования не задумывались.
1. Ресурсоснабжающая организация коттеджного поселка требует предоставлять показания счетчиков воды. Кажется, что сделать это просто, но систем водоснабжения две: своя скважина и поселковый водопровод — расход обеих нужно учитывать. Также необходимо учитывать воду, потраченную на полив из поселкового водопровода, — она стоит дешевле, так как для нее нет расходов за водоотведение. В проекте умного дома эту особенность не учли, и бегать каждый месяц списывать информацию со счетчиков не хочется.
2. В мокрых зонах установили датчики протечки и запирающие шаровые краны с приводом на два ввода холодной воды (скважина и поселок). Но где гарантия, что этот привод сработает? Возможно, блок питания сгорел пару месяцев назад.
3. В поселке плохая сотовая связь, и для решения проблемы установили усилитель «Далсвязь». Однако там четыре блока питания с разным напряжением и мощностью. Если какой-то из них выйдет из строя, качество связи падает. Стабильная связь для коттеджа критически важна: без усилителя даже SMS не отправить, на телефоне будет «Нет сигнала». Поэтому нужно гарантировать, что все блоки питания работают штатно.
4. Система увлажнения работает автономно, без интеграции в умный дом, — она включается ночью и шумит. Сергею это надоело: он хочет, чтобы она работала только днем. Напрямую на системе увлажнения нет возможности задать расписание.
5. Сергей хотел видеть в интерфейсе iRidium параметры трехфазного ввода электропитания. На участке у дома установлен дизель-генератор со своей автоматикой, но он хочет получать оповещения, если с электричеством что-то не так.

:gallery{
    :data='[
        ["knx_home_with_modbus/1.jpg", "В левом верхнем углу — блоки питания усилителя"],
        ["knx_home_with_modbus/2.jpg", "Модули реле и аналоговых входов Wiren Board"],
        ["knx_home_with_modbus/3.jpg", "Модуль WB-MCM8, к нему подключили счетчики воды"],
        ["knx_home_with_modbus/4.jpg", "iRidium Server"]
    ]'
}

## Решение

Сергей обратился к интегратору [«ON-IP»](https://on-ip.ru/) со своим списком пожеланий и проблем. Денег на умный дом уже ушло немало, поэтому решили обойтись малой кровью, особенно после того, как Сергей увидел цены на счетчики воды KNX.
В итоге установили контроллер [Wiren Board](https://wirenboard.com/) и добавили к нему модуль [WB-MCM8](https://wirenboard.com/ru/product/WB-MCM8/). Он предоставляет восемь каналов — для трех счетчиков воды этого более чем достаточно. Показания счетчиков вывели в интерфейс iRidium, значения можно легко скопировать и вставить в веб-интерфейс ресурсоснабжающей организации, теперь бегать и снимать показания не нужно.
Чтобы контролировать блоки питания, установили модуль [WB-MAI6](https://wirenboard.com/ru/product/WB-MAI6/), который измеряет напряжение четырех блоков питания усилителя сотовой связи и блока питания двух запирающих шаровых кранов. Если возникнут проблемы, Сергей получит оповещение через iRidium.
Что касается увлажнителя, теперь его просто выключают по расписанию через модуль реле [WB-MR6-LV](https://wirenboard.com/ru/product/WB-MR6/), поскольку интеграции там не предусмотрено.
Для мониторинга трехфазного ввода добавили счетчик [WB-MAP3E](https://wirenboard.com/ru/product/WB-MAP3E/). Если произойдут сбои, Сергей получит оповещение.

:gallery{
    :data='[
        ["knx_home_with_modbus/5.jpg", "Контроллер Wiren Board 7 отвечает за диспетчеризацию"],
        ["knx_home_with_modbus/10.jpg", "Сергей показывает нам интерфейс управления умным домом. Кнопки в нижнем левом углу как раз управляют системами, которые подключили через Wiren Board"],
        ["knx_home_with_modbus/19.jpg", "Щит с модулями KNX"],
        ["knx_home_with_modbus/15.jpg", "Термостат"]
    ]'
}

## Преимущества

:photo{
    src="knx_home_with_modbus/scr1.jpg"
    caption="Скриншот интерфейса Iridium. Управление подсветкой фасада"
    width="400"
    float="right"
}

Возможно, проблемы Сергея кажутся незначительными, но умный дом — это прежде всего, комфорт. Если какая-то мелочь мешает наслаждаться жизнью, лучше ее устранить. Интегратор посоветовал решение диспетчеризации Wiren Board и успешно совместил его с умным домом KNX. Он добавил соответствующие функции в интерфейс iRidium server и настроил оповещения.
В планах Сергея — добавить управление приточно-вытяжной вентиляционной установкой через шаблон Wiren Board. Также он хочет включать хамам заранее, по дороге домой, чтобы сразу приехать и попариться.
В техническом помещении со щитами Сергей добавил датчик температуры [1-Wire](https://wirenboard.com/ru/product/1wire-DS18B20/) и планирует по нему выставлять температуру кондиционера. Ему не нравится, как кондиционер работает в автоматическом режиме от встроенного датчика.
Теперь у Сергея есть два варианта: он может добавлять оборудование KNX или Modbus. Как оказалось, некоторые решения проще и дешевле реализовать именно на Modbus. Две экосистемы хорошо взаимодействуют между собой.
В ассортименте компании [Wiren Board](https://wirenboard.com/) есть устройства для решения любой задачи автоматизации: датчики климата, счетчики электроэнергии, модули защиты от протечек, диммеры светодиодных лент и ламп, мощные реле для светодиодного освещения, модули дискретных входов-выходов и т.д.
Компания Wiren Board даёт на все оборудование двухлетнюю гарантию с заменой оборудования без предварительной отправки в сервисный центр, а инженеры технической поддержки готовы помочь в решении как типовых, так и нестандартных задач.

## Дополнительные материалы

- [Улучшаем умный дом на KNX: добавляем диспетчеризацию на Modbus](https://habr.com/ru/companies/wirenboard/articles/852354/)

Прочее

- [Примеры других внедрений](../solutions/)
- [Статьи о подборе оборудования и рассказы пользователей](../articles)
